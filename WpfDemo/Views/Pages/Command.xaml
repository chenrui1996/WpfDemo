<UserControl
    x:Class="WpfDemo.Views.Pages.Command"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converts="clr-namespace:WpfDemo.Converts"
    xmlns:customCommands="clr-namespace:WpfDemo.CustomCommands"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:WpfDemo.Views.Pages"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:viewmodels="clr-namespace:WpfDemo.ViewModels.PageViewModels"
    d:DataContext="{d:DesignInstance Type=viewmodels:CommandViewModel}"
    mc:Ignorable="d">
    <UserControl.Resources>
        <converts:MultiParamConverter x:Key="MultiParamConverter" />
    </UserControl.Resources>
    <!--  不推荐绑定在子控件中，需要获得焦点才能生效  -->
    <!--<UserControl.CommandBindings>
        <CommandBinding
            CanExecute="SimpleCommand_CanExecute"
            Command="{x:Static customCommands:TestCustomCommands.SimpleCommand}"
            Executed="SimpleCommand_Executed" />

        <CommandBinding
            CanExecute="ShowMessageCommand_CanExecute"
            Command="{x:Static customCommands:TestCustomCommands.ShowMessageCommand}"
            Executed="ShowMessageCommand_Executed" />
    </UserControl.CommandBindings>-->

    <Grid>
        <StackPanel VerticalAlignment="Top" Orientation="Vertical">
            <GroupBox
                Margin="0,5"
                materialDesign:ColorZoneAssist.Background="{DynamicResource MaterialDesign.Brush.Primary.Dark}"
                materialDesign:ColorZoneAssist.Foreground="{DynamicResource MaterialDesign.Brush.Primary.Dark.Foreground}"
                materialDesign:ColorZoneAssist.Mode="Custom"
                FontSize="18"
                Header="ICommand"
                Style="{StaticResource MaterialDesignGroupBox}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <StackPanel
                        Grid.Column="0"
                        Width="400"
                        Margin="10"
                        VerticalAlignment="Top"
                        Orientation="Vertical">
                        <Button
                            Height="40"
                            Margin="10,5"
                            Command="{Binding CustomCommand}"
                            CommandParameter="Hello World"
                            Content="同步按钮"
                            Style="{StaticResource MaterialDesignRaisedDarkButton}" />
                        <Button
                            Height="40"
                            Margin="10,5"
                            Command="{Binding CustomCommand2}"
                            Content="异步按钮"
                            Style="{StaticResource MaterialDesignRaisedDarkButton}" />
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="40" />
                                <ColumnDefinition />
                                <ColumnDefinition Width="40" />
                            </Grid.ColumnDefinitions>
                            <Button
                                Grid.Column="0"
                                Width="30"
                                Height="30"
                                Command="{Binding MinusCommand}"
                                Content="{materialDesign:PackIcon Kind=Minus,
                                                                  Size=24}"
                                Style="{StaticResource MaterialDesignIconForegroundButton}"
                                ToolTip="减" />
                            <materialDesign:NumericUpDown
                                Grid.Column="1"
                                Margin="10,15"
                                Style="{StaticResource MaterialDesignOutlinedNumericUpDown}"
                                Value="{Binding Age}" />
                            <Button
                                Grid.Column="2"
                                Width="30"
                                Height="30"
                                Command="{Binding PlusCommand}"
                                Content="{materialDesign:PackIcon Kind=Plus,
                                                                  Size=24}"
                                Style="{StaticResource MaterialDesignIconForegroundButton}"
                                ToolTip="减" />
                        </Grid>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="40" />
                                <ColumnDefinition />
                                <ColumnDefinition Width="40" />
                            </Grid.ColumnDefinitions>
                            <Button
                                Grid.Column="0"
                                Width="30"
                                Height="30"
                                Command="{Binding MinusCommand1}"
                                Content="{materialDesign:PackIcon Kind=Minus,
                                                                  Size=24}"
                                Style="{StaticResource MaterialDesignIconForegroundButton}"
                                ToolTip="减" />
                            <materialDesign:NumericUpDown
                                Grid.Column="1"
                                Margin="10,15"
                                Style="{StaticResource MaterialDesignOutlinedNumericUpDown}"
                                Value="{Binding Age1}" />
                            <Button
                                Grid.Column="2"
                                Width="30"
                                Height="30"
                                Command="{Binding PlusCommand1}"
                                Content="{materialDesign:PackIcon Kind=Plus,
                                                                  Size=24}"
                                Style="{StaticResource MaterialDesignIconForegroundButton}"
                                ToolTip="减" />
                        </Grid>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="40" />
                                <ColumnDefinition />
                                <ColumnDefinition Width="40" />
                            </Grid.ColumnDefinitions>
                            <Button
                                Grid.Column="0"
                                Width="30"
                                Height="30"
                                Command="{Binding MinusCommand2}"
                                Content="{materialDesign:PackIcon Kind=Minus,
                                                                  Size=24}"
                                Style="{StaticResource MaterialDesignIconForegroundButton}"
                                ToolTip="减" />
                            <materialDesign:NumericUpDown
                                Grid.Column="1"
                                Margin="10,15"
                                Style="{StaticResource MaterialDesignOutlinedNumericUpDown}"
                                Value="{Binding Age2}" />
                            <Button
                                Grid.Column="2"
                                Width="30"
                                Height="30"
                                Command="{Binding PlusCommand2}"
                                Content="{materialDesign:PackIcon Kind=Plus,
                                                                  Size=24}"
                                Style="{StaticResource MaterialDesignIconForegroundButton}"
                                ToolTip="减" />
                        </Grid>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="40" />
                                <ColumnDefinition />
                                <ColumnDefinition Width="40" />
                            </Grid.ColumnDefinitions>
                            <Button
                                Grid.Column="0"
                                Width="30"
                                Height="30"
                                Command="{Binding MinusCommand3}"
                                Content="{materialDesign:PackIcon Kind=Minus,
                                                                  Size=24}"
                                Style="{StaticResource MaterialDesignIconForegroundButton}"
                                ToolTip="减" />
                            <materialDesign:NumericUpDown
                                Grid.Column="1"
                                Margin="10,15"
                                Style="{StaticResource MaterialDesignOutlinedNumericUpDown}"
                                Value="{Binding Age3}" />
                            <Button
                                Grid.Column="2"
                                Width="30"
                                Height="30"
                                Command="{Binding PlusCommand3}"
                                Content="{materialDesign:PackIcon Kind=Plus,
                                                                  Size=24}"
                                Style="{StaticResource MaterialDesignIconForegroundButton}"
                                ToolTip="减" />
                        </Grid>
                    </StackPanel>
                    <StackPanel
                        Grid.Column="1"
                        Width="400"
                        Margin="10"
                        VerticalAlignment="Top"
                        Orientation="Vertical">
                        <Button
                            Height="40"
                            Margin="10,5"
                            Command="{Binding TestParaCommand}"
                            CommandParameter="Hello World"
                            Content="固定参数"
                            Style="{StaticResource MaterialDesignRaisedDarkButton}" />
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition />
                                <ColumnDefinition Width="200" />
                            </Grid.ColumnDefinitions>
                            <!--  动态参数（绑定 TextBox 的值）  -->
                            <TextBox
                                x:Name="InputBox"
                                Grid.Column="0"
                                Margin="10,5"
                                Style="{StaticResource MaterialDesignOutlinedTextBox}" />
                            <Button
                                Grid.Column="1"
                                Height="40"
                                Margin="10,5"
                                Command="{Binding TestParaCommand1}"
                                CommandParameter="{Binding Text, ElementName=InputBox}"
                                Content="传单个参数"
                                Style="{StaticResource MaterialDesignRaisedDarkButton}" />
                        </Grid>

                        <Grid Margin="10,5">
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>
                            <TextBox
                                x:Name="NameBox"
                                Grid.Row="0"
                                Grid.Column="0"
                                Margin="0,15"
                                materialDesign:HintAssist.Hint="Name"
                                Style="{StaticResource MaterialDesignOutlinedTextBox}" />
                            <materialDesign:NumericUpDown
                                x:Name="AgeBox"
                                Grid.Row="0"
                                Grid.Column="1"
                                Margin="10,15"
                                Style="{StaticResource MaterialDesignOutlinedNumericUpDown}" />
                            <Button
                                Grid.Row="1"
                                Grid.ColumnSpan="2"
                                Height="40"
                                Margin="0,15"
                                Command="{Binding TestParaCommand2}"
                                Content="传多个参数"
                                Style="{StaticResource MaterialDesignRaisedDarkButton}">
                                <Button.CommandParameter>
                                    <MultiBinding Converter="{StaticResource MultiParamConverter}">
                                        <Binding ElementName="NameBox" Path="Text" />
                                        <Binding ElementName="AgeBox" Path="Value" />
                                    </MultiBinding>
                                </Button.CommandParameter>
                            </Button>
                        </Grid>

                        <StackPanel
                            Margin="10,5"
                            VerticalAlignment="Top"
                            Orientation="Vertical">
                            <DataGrid
                                x:Name="Users"
                                AutoGenerateColumns="True"
                                CanUserAddRows="False"
                                ItemsSource="{Binding Users}" />

                            <Button
                                Height="40"
                                Command="{Binding TestParaCommand3}"
                                CommandParameter="{Binding SelectedItem, ElementName=Users}"
                                Content="传对象参数"
                                Style="{StaticResource MaterialDesignRaisedDarkButton}" />
                        </StackPanel>
                    </StackPanel>

                </Grid>

            </GroupBox>
            <GroupBox
                Margin="0,5"
                materialDesign:ColorZoneAssist.Background="{DynamicResource MaterialDesign.Brush.Primary.Dark}"
                materialDesign:ColorZoneAssist.Foreground="{DynamicResource MaterialDesign.Brush.Primary.Dark.Foreground}"
                materialDesign:ColorZoneAssist.Mode="Custom"
                FontSize="18"
                Header="RoutedCommand"
                Style="{StaticResource MaterialDesignGroupBox}">
                <StackPanel>
                    <Button
                        Width="600"
                        Height="40"
                        Margin="10,5"
                        Command="{x:Static customCommands:TestCustomCommands.SimpleCommand}"
                        Content="执行 RoutedCommand"
                        Style="{StaticResource MaterialDesignRaisedDarkButton}" />
                    <TextBlock
                        HorizontalAlignment="Center"
                        FontSize="14"
                        Foreground="Gray"
                        Text="提示：按 Ctrl+B 可触发 '显示消息' 命令（全局）" />

                    <!--  需要手动绑定Text  -->
                    <Button
                        Width="600"
                        Height="40"
                        Margin="10,5"
                        Command="{x:Static customCommands:TestCustomCommands.ShowMessageCommand}"
                        Content="{Binding RelativeSource={RelativeSource Self}, Path=Command.Text}"
                        Style="{StaticResource MaterialDesignRaisedDarkButton}" />

                    <TextBlock
                        HorizontalAlignment="Center"
                        FontSize="14"
                        Foreground="Gray"
                        Text="提示：按 Ctrl+M 可触发 '显示消息' 命令（全局）。相对RoutedCommand可以绑定绑定Text " />

                    <Border
                        Height="600"
                        Margin="5"
                        Padding="10"
                        BorderBrush="Black"
                        BorderThickness="1">
                        <DockPanel>
                            <!--  菜单栏  -->
                            <Menu DockPanel.Dock="Top">
                                <MenuItem Header="_File">
                                    <MenuItem
                                        Command="ApplicationCommands.Open"
                                        Header="Open"
                                        Icon="{materialDesign:PackIcon Kind=File}" />
                                    <MenuItem
                                        Command="ApplicationCommands.Save"
                                        Header="Save As.."
                                        Icon="{materialDesign:PackIcon Kind=ContentSaveAll}" />
                                    <MenuItem
                                        Command="{x:Static customCommands:TestCustomCommands.ExitCommand}"
                                        Header="Exit"
                                        Icon="{materialDesign:PackIcon Kind=ExitToApp}"
                                        InputGestureText="Ctrl+E" />
                                    <MenuItem
                                        Command="ApplicationCommands.Print"
                                        Header="Print"
                                        Icon="{materialDesign:PackIcon Kind=Printer}" />
                                    <Separator />
                                    <MenuItem
                                        Command="ApplicationCommands.Help"
                                        Header="_Help"
                                        Icon="{materialDesign:PackIcon Kind=Help}" />
                                </MenuItem>
                                <MenuItem Header="_Edit">
                                    <MenuItem Command="ApplicationCommands.SelectAll" Icon="{materialDesign:PackIcon Kind=SelectAll}" />
                                    <Separator />
                                    <MenuItem
                                        Command="ApplicationCommands.Cut"
                                        Header="_Cut"
                                        Icon="{materialDesign:PackIcon Kind=ContentCut}" />
                                    <MenuItem
                                        Command="ApplicationCommands.Copy"
                                        Header="_Copy"
                                        Icon="{materialDesign:PackIcon Kind=ContentCopy}" />
                                    <MenuItem
                                        Command="ApplicationCommands.Paste"
                                        Header="_Paste"
                                        Icon="{materialDesign:PackIcon Kind=ContentPaste}" />
                                    <Separator />
                                    <MenuItem
                                        Command="ApplicationCommands.Undo"
                                        Header="Undo"
                                        Icon="{materialDesign:PackIcon Kind=Undo}" />
                                    <MenuItem
                                        Command="ApplicationCommands.Redo"
                                        Header="Redo"
                                        Icon="{materialDesign:PackIcon Kind=Redo}" />

                                </MenuItem>
                            </Menu>


                            <!--  编辑区  -->
                            <!--<RichTextBox
                                Name="editor"
                                Height="500"
                                Margin="10"
                                VerticalAlignment="Top"
                                AcceptsReturn="True"
                                Style="{StaticResource MaterialDesignOutlinedRichTextBox}"
                                VerticalScrollBarVisibility="Auto" />-->
                            <DockPanel Name="mainPanel">

                                <!--  This tool bar contains all the editing buttons.  -->
                                <ToolBarTray DockPanel.Dock="Top">
                                    <ToolBar
                                        Name="mainToolBar"
                                        Height="30"
                                        DockPanel.Dock="Top"
                                        Style="{StaticResource MaterialDesignToolBar}">
                                        <Button
                                            Command="ApplicationCommands.SelectAll"
                                            Style="{StaticResource MaterialDesignIconButton}"
                                            ToolTip="Cut">
                                            <materialDesign:PackIcon Kind="SelectAll" />
                                        </Button>
                                        <Button
                                            Command="ApplicationCommands.Cut"
                                            Style="{StaticResource MaterialDesignIconButton}"
                                            ToolTip="Cut">
                                            <materialDesign:PackIcon Kind="ContentCut" />
                                        </Button>
                                        <Button
                                            Command="ApplicationCommands.Copy"
                                            Style="{StaticResource MaterialDesignIconButton}"
                                            ToolTip="Copy">
                                            <materialDesign:PackIcon Kind="ContentCopy" />
                                        </Button>
                                        <Button
                                            Command="ApplicationCommands.Paste"
                                            Style="{StaticResource MaterialDesignIconButton}"
                                            ToolTip="Paste">
                                            <materialDesign:PackIcon Kind="ContentPaste" />
                                        </Button>
                                        <Button
                                            Command="ApplicationCommands.Undo"
                                            Style="{StaticResource MaterialDesignIconButton}"
                                            ToolTip="Undo">
                                            <materialDesign:PackIcon Kind="Undo" />
                                        </Button>
                                        <Button
                                            Command="ApplicationCommands.Redo"
                                            Style="{StaticResource MaterialDesignIconButton}"
                                            ToolTip="Redo">
                                            <materialDesign:PackIcon Kind="Redo" />
                                        </Button>

                                        <Button
                                            Command="EditingCommands.ToggleBold"
                                            Style="{StaticResource MaterialDesignIconButton}"
                                            ToolTip="Bold">
                                            <TextBlock FontWeight="Bold">B</TextBlock>
                                        </Button>
                                        <Button
                                            Command="EditingCommands.ToggleItalic"
                                            Style="{StaticResource MaterialDesignIconButton}"
                                            ToolTip="Italic">
                                            <TextBlock FontStyle="Italic" FontWeight="Bold">I</TextBlock>
                                        </Button>
                                        <Button
                                            Command="EditingCommands.ToggleUnderline"
                                            Style="{StaticResource MaterialDesignIconButton}"
                                            ToolTip="Underline">
                                            <TextBlock FontWeight="Bold" TextDecorations="Underline">U</TextBlock>
                                        </Button>
                                        <Button
                                            Command="EditingCommands.IncreaseFontSize"
                                            Style="{StaticResource MaterialDesignIconButton}"
                                            ToolTip="Grow Font">
                                            <materialDesign:PackIcon Kind="Increment" />
                                        </Button>
                                        <Button
                                            Command="EditingCommands.DecreaseFontSize"
                                            Style="{StaticResource MaterialDesignIconButton}"
                                            ToolTip="Shrink Font">
                                            <materialDesign:PackIcon Kind="Decrement" />
                                        </Button>

                                        <Button
                                            Command="EditingCommands.ToggleBullets"
                                            Style="{StaticResource MaterialDesignIconButton}"
                                            ToolTip="Bullets">
                                            <materialDesign:PackIcon Kind="FormatListBulleted" />
                                        </Button>
                                        <Button
                                            Command="EditingCommands.ToggleNumbering"
                                            Style="{StaticResource MaterialDesignIconButton}"
                                            ToolTip="Numbering">
                                            <materialDesign:PackIcon Kind="Numeric" />
                                        </Button>
                                        <Button
                                            Command="EditingCommands.AlignLeft"
                                            Style="{StaticResource MaterialDesignIconButton}"
                                            ToolTip="Align Left">
                                            <materialDesign:PackIcon Kind="AlignHorizontalLeft" />
                                        </Button>
                                        <Button
                                            Command="EditingCommands.AlignCenter"
                                            Style="{StaticResource MaterialDesignIconButton}"
                                            ToolTip="Align Center">
                                            <materialDesign:PackIcon Kind="AlignHorizontalCenter" />
                                        </Button>
                                        <Button
                                            Command="EditingCommands.AlignRight"
                                            Style="{StaticResource MaterialDesignIconButton}"
                                            ToolTip="Align Right">
                                            <materialDesign:PackIcon Kind="AlignHorizontalRight" />
                                        </Button>
                                        <Button
                                            Command="EditingCommands.AlignJustify"
                                            Style="{StaticResource MaterialDesignIconButton}"
                                            ToolTip="Align Justify">
                                            <materialDesign:PackIcon Kind="AlignHorizontalDistribute" />
                                        </Button>
                                        <Button
                                            Command="EditingCommands.IncreaseIndentation"
                                            Style="{StaticResource MaterialDesignIconButton}"
                                            ToolTip="Increase Indent">
                                            <materialDesign:PackIcon Kind="ArrowCollapseRight" />
                                        </Button>
                                        <Button
                                            Command="EditingCommands.DecreaseIndentation"
                                            Style="{StaticResource MaterialDesignIconButton}"
                                            ToolTip="Decrease Indent">
                                            <materialDesign:PackIcon Kind="ArrowCollapseLeft" />
                                        </Button>
                                    </ToolBar>
                                </ToolBarTray>

                                <!--
                                    By default pressing tab moves focus to the next control. Setting AcceptsTab to true allows the
                                    RichTextBox to accept tab characters.
                                -->
                                <RichTextBox
                                    Name="mainRTB"
                                    VerticalContentAlignment="Top"
                                    AcceptsReturn="True"
                                    AcceptsTab="True"
                                    IsDocumentEnabled="True"
                                    SpellCheck.IsEnabled="True"
                                    VerticalScrollBarVisibility="Auto" />
                            </DockPanel>
                        </DockPanel>
                    </Border>

                </StackPanel>
            </GroupBox>
        </StackPanel>
    </Grid>
</UserControl>
